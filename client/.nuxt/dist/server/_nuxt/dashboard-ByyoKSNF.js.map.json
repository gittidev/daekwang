{"file":"dashboard-ByyoKSNF.js","mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;AAWuB,kBAAc;AACtB,cAAU;AACT,QAAI,KAAK;AACN,QAAI,EAAE;AACN,QAAI,EAAE;AACzB,UAAM,SAAS,iBAAiB;AA6B1B,UAAA,EAAE,MAAM,eAAe,QAAQ,KAAI,CAAA,QAAA,SAAA,IAAAA,iBAAA,MAAM;AAAA,MAE7C;AAAA,MAA+B,MAC/B,OAAO,GAAG,OAAO,OAAO,MAAM,wBAAwB;AAAA,QACpD,SAAS;AAAA,UACP,eAAe,UAAU,aAAa,QAAQ,aAAa,CAAC;AAAA,QAAA;AAAA,MAE/D,CAAA;AAAA,IACH,CAAA;AAEmB,aAAS,MAAM;;AAAA,kCAAc,UAAd,mBAAqB,WAAU;AAAA,KAAC;AAC3C;AAAA,MACrB;;AAAM,oCAAc,UAAd,mBAAqB,OAAO,CAAC,MAAM,EAAE,cAAc,WAAU;AAAA;AAAA,IAAA;AAE1C,aAAS,MAAM;;AAAA,iCAAc,UAAd,mBAAsB;AAAA,KAAE;AAG9C,QAAI;AAAA,MACtB,EAAE,OAAO,MAAM,OAAO,EAAE;AAAA,MACxB,EAAE,OAAO,MAAM,OAAO,EAAE;AAAA,MACxB,EAAE,OAAO,MAAM,OAAO,GAAG;AAAA,MACzB,EAAE,OAAO,MAAM,OAAO,GAAG;AAAA,MACzB,EAAE,OAAO,MAAM,OAAO,EAAE;AAAA,MACxB,EAAE,OAAO,MAAM,OAAO,EAAE;AAAA,MACxB,EAAE,OAAO,MAAM,OAAO,GAAG;AAAA,MACzB,EAAE,OAAO,MAAM,OAAO,EAAE;AAAA,MACxB,EAAE,OAAO,MAAM,OAAO,GAAG;AAAA,MACzB,EAAE,OAAO,OAAO,OAAO,GAAG;AAAA,MAC1B,EAAE,OAAO,OAAO,OAAO,GAAG;AAAA,MAC1B,EAAE,OAAO,OAAO,OAAO,GAAG;AAAA,IAC3B,CAAA;;;;;;;;;;;;;;","names":["_withAsyncContext"],"sources":["../../../../pages/admin/dashboard.vue"],"sourcesContent":["<script setup lang=\"ts\">\r\nimport { useAdminToken } from \"../../composables/useAdminToken\";\r\nimport { useRouter } from \"vue-router\";\r\nimport { useAsyncData } from \"nuxt/app\";\r\nimport type { ConstructionResponse } from \"@/types/construction\";\r\nimport { computed, ref, onMounted } from \"vue\";\r\nimport MonthlyConstructionChart from \"@/components/MonthlyConstructionChart.vue\";\r\nimport { createAdmin } from \"@/lib/api/createAdmin\";\r\nimport type { AdminCreateRequest } from \"@/lib/api/createAdmin\";\r\nimport { useRuntimeConfig } from \"nuxt/app\";\r\n\r\nconst { isLoggedIn } = useAdminToken();\r\nconst router = useRouter();\r\nconst isReady = ref(false);\r\nconst newAdminId = ref(\"\");\r\nconst newAdminPw = ref(\"\");\r\nconst config = useRuntimeConfig();\r\n\r\n// í´ë¼ì´ì–¸íŠ¸ì—ì„œë§Œ ì¸ì¦ ì²´í¬ ë° ì´ë™ ì²˜ë¦¬\r\nonMounted(() => {\r\n  if (process.client) {\r\n    if (!isLoggedIn.value) {\r\n      router.push(\"/admin\");\r\n    } else {\r\n      isReady.value = true;\r\n    }\r\n  }\r\n});\r\n\r\nconst handleAddAdmin = async () => {\r\n  const payload: AdminCreateRequest = {\r\n    username: newAdminId.value,\r\n    password: newAdminPw.value,\r\n  };\r\n  const { data, error } = await createAdmin(payload);\r\n  if (error) {\r\n    alert(`âš ï¸ ${error}`);\r\n  } else {\r\n    alert(`âœ… ê´€ë¦¬ì ê³„ì •(${data?.username})ì´ ìƒì„±ë˜ì—ˆìŠµë‹ˆë‹¤.`);\r\n    newAdminId.value = \"\";\r\n    newAdminPw.value = \"\";\r\n  }\r\n};\r\n\r\n// ì‹œê³µ ë°ì´í„°\r\nconst { data: constructions, pending } = await useAsyncData<\r\n  ConstructionResponse[]\r\n>(\"admin-constructions-summary\", () =>\r\n  $fetch(`${config.public.apiUrl}/admin/constructions`, {\r\n    headers: {\r\n      Authorization: `Bearer ${localStorage.getItem(\"admin_token\")}`,\r\n    },\r\n  })\r\n);\r\n\r\nconst totalCount = computed(() => constructions.value?.length || 0);\r\nconst publishedCount = computed(\r\n  () => constructions.value?.filter((c) => c.is_published).length || 0\r\n);\r\nconst latestConstruction = computed(() => constructions.value?.[0]);\r\n\r\n// ë”ë¯¸ ì›”ë³„ ì‹œê³µ ë°ì´í„°\r\nconst monthlyData = ref([\r\n  { month: \"1ì›”\", count: 5 },\r\n  { month: \"2ì›”\", count: 8 },\r\n  { month: \"3ì›”\", count: 12 },\r\n  { month: \"4ì›”\", count: 15 },\r\n  { month: \"5ì›”\", count: 7 },\r\n  { month: \"6ì›”\", count: 9 },\r\n  { month: \"7ì›”\", count: 10 },\r\n  { month: \"8ì›”\", count: 6 },\r\n  { month: \"9ì›”\", count: 11 },\r\n  { month: \"10ì›”\", count: 14 },\r\n  { month: \"11ì›”\", count: 13 },\r\n  { month: \"12ì›”\", count: 16 },\r\n]);\r\n</script>\r\n\r\n<template>\r\n  <client-only>\r\n    <div v-if=\"isReady\" class=\"dashboard\">\r\n      <h1 class=\"text-2xl font-bold mb-6\">ê´€ë¦¬ì ëŒ€ì‹œë³´ë“œ</h1>\r\n      <!-- ê´€ë¦¬ì ì¶”ê°€ ì„¹ì…˜ -->\r\n      <div class=\"mt-6\">\r\n        <h2 class=\"text-lg font-semibold mb-2\">â• ê´€ë¦¬ì ì¶”ê°€</h2>\r\n        <input\r\n          v-model=\"newAdminId\"\r\n          placeholder=\"ì´ë©”ì¼ (ì•„ì´ë””)\"\r\n          class=\"border px-3 py-2 rounded w-full mb-2\"\r\n        />\r\n        <input\r\n          v-model=\"newAdminPw\"\r\n          type=\"password\"\r\n          placeholder=\"ë¹„ë°€ë²ˆí˜¸\"\r\n          class=\"border px-3 py-2 rounded w-full mb-2\"\r\n        />\r\n        <button @click=\"handleAddAdmin\" class=\"contact-button w-full\">\r\n          ê´€ë¦¬ì ì¶”ê°€\r\n        </button>\r\n      </div>\r\n\r\n      <!-- ìš”ì•½ ì¹´ë“œ ê·¸ë¦¬ë“œ -->\r\n      <div class=\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 mb-8\">\r\n        <div class=\"summary-card\">\r\n          <p class=\"text-sm text-gray-500\">ì´ ì‹œê³µ ê±´ìˆ˜</p>\r\n          <p class=\"text-2xl font-bold\">{{ totalCount }}</p>\r\n        </div>\r\n\r\n        <div class=\"summary-card\">\r\n          <p class=\"text-sm text-gray-500\">ê³µê°œëœ ì‹œê³µ</p>\r\n          <p class=\"text-2xl font-bold\">{{ publishedCount }}</p>\r\n        </div>\r\n\r\n        <div class=\"summary-card\">\r\n          <p class=\"text-sm text-gray-500\">ìµœê·¼ ë“±ë¡</p>\r\n          <p class=\"text-md font-semibold truncate\">\r\n            {{ latestConstruction?.place || \"ì—†ìŒ\" }}\r\n          </p>\r\n          <p class=\"text-sm text-gray-400\">\r\n            {{ latestConstruction?.created_at?.slice(0, 10) || \"\" }}\r\n          </p>\r\n        </div>\r\n      </div>\r\n\r\n      <!-- ì°¨íŠ¸ì™€ ë²„íŠ¼ì„ ìœ„í•œ ê·¸ë¦¬ë“œ ë ˆì´ì•„ì›ƒ -->\r\n      <div class=\"chart-and-buttons grid grid-cols-1 lg:grid-cols-5 gap-6 mb-8\">\r\n        <!-- ì›”ë³„ ì‹œê³µ ê±´ìˆ˜ ì°¨íŠ¸ (ì™¼ìª½, 3/5) -->\r\n        <div class=\"chart-container lg:col-span-3\">\r\n          <MonthlyConstructionChart :data=\"monthlyData\" />\r\n        </div>\r\n\r\n        <!-- ê´€ë¦¬ ë§í¬ ë²„íŠ¼ (ì˜¤ë¥¸ìª½, 2/5) -->\r\n        <div class=\"buttons-container lg:col-span-2\">\r\n          <NuxtLink to=\"/admin/constructions\" class=\"card-link\">\r\n            <h2 class=\"text-xl font-semibold\">ğŸ› ï¸ ì‹œê³µ ë‚´ì—­ ê´€ë¦¬</h2>\r\n            <p class=\"text-sm text-gray-500\">ì‹œê³µ ê¸°ë¡ì„ ì¡°íšŒ ë° ìˆ˜ì •í•©ë‹ˆë‹¤.</p>\r\n          </NuxtLink>\r\n\r\n          <NuxtLink to=\"/admin/settings\" class=\"card-link mt-4\">\r\n            <h2 class=\"text-xl font-semibold\">âš™ï¸ ì„¤ì •</h2>\r\n            <p class=\"text-sm text-gray-500\">\r\n              ì‚¬ì´íŠ¸ ë° ê´€ë¦¬ì ì •ë³´ë¥¼ ìˆ˜ì •í•©ë‹ˆë‹¤.\r\n            </p>\r\n          </NuxtLink>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </client-only>\r\n</template>\r\n\r\n<style scoped>\r\n.dashboard {\r\n  max-width: 80%;\r\n  margin: 0 auto;\r\n  padding: 2rem;\r\n  min-height: 100vh;\r\n}\r\n\r\n.summary-card {\r\n  background: #f8fafc;\r\n  padding: 1rem 1.5rem;\r\n  border-radius: 8px;\r\n  border: 1px solid #e2e8f0;\r\n  display: flex;\r\n  flex-direction: column;\r\n  justify-content: center;\r\n}\r\n\r\n.chart-and-buttons {\r\n  align-items: center; /* ì°¨íŠ¸ì™€ ë²„íŠ¼ì„ ìˆ˜ì§ ì¤‘ì•™ ì •ë ¬ */\r\n}\r\n\r\n.chart-container {\r\n  max-width: 100%;\r\n}\r\n\r\n/* ì°¨íŠ¸ í¬ê¸° ì¡°ì • */\r\n.chart-container :deep(canvas) {\r\n  max-height: 350px; /* ì°¨íŠ¸ ë†’ì´ ì•½ê°„ í‚¤ì›€ */\r\n  width: 100%;\r\n  aspect-ratio: 4 / 3; /* ì°¨íŠ¸ì˜ ê°€ë¡œ:ì„¸ë¡œ ë¹„ìœ¨ ì¡°ì • */\r\n}\r\n\r\n.buttons-container {\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 1.5rem; /* ë²„íŠ¼ ê°„ ê°„ê²© ëŠ˜ë¦¼ */\r\n  justify-content: center; /* ë²„íŠ¼ì„ ìˆ˜ì§ ì¤‘ì•™ì— ë°°ì¹˜ */\r\n}\r\n\r\n.card-link {\r\n  display: block;\r\n  border: 1px solid #ddd;\r\n  border-radius: 8px;\r\n  padding: 1.5rem;\r\n  background: white;\r\n  transition: all 0.2s ease;\r\n}\r\n\r\n.card-link:hover {\r\n  background-color: #f1f5f9;\r\n  transform: translateY(-2px);\r\n}\r\n\r\n/* ë°˜ì‘í˜• ì¡°ì • */\r\n@media (max-width: 1024px) {\r\n  .chart-and-buttons {\r\n    gap: 2rem; /* ëª¨ë°”ì¼ì—ì„œ ë” ë„“ì€ ê°„ê²© */\r\n  }\r\n  .chart-container {\r\n    max-width: 100%;\r\n  }\r\n  .buttons-container {\r\n    margin-top: 1rem;\r\n  }\r\n  .chart-container :deep(canvas) {\r\n    max-height: 300px; /* ëª¨ë°”ì¼ì—ì„œ ì•½ê°„ ì‘ê²Œ */\r\n    aspect-ratio: 3 / 2; /* ëª¨ë°”ì¼ ë¹„ìœ¨ ì¡°ì • */\r\n  }\r\n}\r\n</style>\r\n"],"version":3}